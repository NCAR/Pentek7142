#include "p71xx.h"
#include <fcntl.h>
#include <sys/ioctl.h>
#include <iostream>
#include <stdio.h>


using namespace Pentek;

////////////////////////////////////////////////////////////////////////////////////////
p71xx::p71xx(std::string devName, bool simulate):
_ok(true),
_devName(devName, simulate),
_simulate(simulate)
{
	if (_simulate) {
		_ok = true;
		return;
	}
	
	_ok = false;
	if (_devName.size() < 1)
		return;

	// remove trailing slash
	if (_devName[_devName.size()-1] == '/') {
		_devName.erase(_devName.size()-1,1);
	}

	// create and access the ctrl device name
	_devCtrl = _devName + "/ctrl";
	int fd = open(_devCtrl.c_str(), O_RDWR);
	if (fd < 0)
		return;

	close(fd);
	_ok = true;
}

////////////////////////////////////////////////////////////////////////////////////////
p71xx::~p71xx() {
}

////////////////////////////////////////////////////////////////////////////////////////
bool
p71xx::ok() {
	return _ok;
}

////////////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////////////
